# ================================================
# ENVIRONMENT VARIABLES TEMPLATE
# ================================================
# Copy this file to .env.local and fill in your values
# NEVER commit .env.local to version control

# ================================================
# ⚠️ CRITICAL: FIX EMAIL VERIFICATION LINKS
# ================================================
# If email verification links point to localhost:3000, you MUST:
# 1. Go to https://supabase.com/dashboard/project/YOUR_PROJECT/auth/url-configuration
# 2. Change "Site URL" from http://localhost:3000 to your production URL
# 3. Add your production URL to "Redirect URLs" list
# 4. Go to Authentication > Email Templates
# 5. Ensure templates use {{ .SiteURL }} not hardcoded localhost
#
# YOUR PRODUCTION URL: https://oppspot.vercel.app (or your custom domain)
# ================================================

# ================================================
# SUPABASE CONFIGURATION
# ================================================
# Get these from your Supabase project dashboard
# URL: Settings > API > Project URL
# Anon Key: Settings > API > Project API keys > anon/public
# Service Role: Settings > API > Project API keys > service_role

NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJ...your-anon-key...
SUPABASE_SERVICE_ROLE_KEY=eyJ...your-service-role-key...

# ================================================
# AI/LLM CONFIGURATION
# ================================================
# OpenRouter API for AI features
# Get your API key from: https://openrouter.ai/
# Add credits: minimum $5 recommended for testing

OPENROUTER_API_KEY=sk-or-v1-your-api-key-here

# Local LLMs via Ollama (optional, for local chat)
# Base URL where Ollama is reachable
OLLAMA_BASE_URL=http://localhost:11434
# Default model for general generation
OLLAMA_MODEL=mistral:7b
# Preferred chat models in order (comma-separated). Must be installed in Ollama.
# Aligns with scripts/setup-ollama.sh defaults
OLLAMA_CHAT_MODELS=mistral:7b,llama3.2:3b,llama3.2:1b,phi:2.7b

# ================================================
# GOOGLE APIS
# ================================================
# Google Cloud Console: https://console.cloud.google.com
# 1. Create a new project or select existing
# 2. Enable APIs: Maps JavaScript API, Places API
# 3. Create credentials > API Key
# 4. Restrict key to your domains for security

NEXT_PUBLIC_GOOGLE_MAPS_API_KEY=AIza...your-maps-key...
GOOGLE_PLACES_API_KEY=AIza...your-places-key...

# ================================================
# EMAIL NOTIFICATIONS
# ================================================
# Resend for transactional emails
# Sign up at: https://resend.com
# 1. Verify your domain
# 2. Create API key
# 3. Add DNS records as instructed

RESEND_API_KEY=re_your_api_key_here

# ================================================
# APPLICATION CONFIGURATION
# ================================================
# CRITICAL: These URLs must match your Supabase dashboard configuration!
# For development: http://localhost:3000 or http://localhost:3009
# For production: https://oppspot.vercel.app or your custom domain
# 
# ⚠️ IMPORTANT: Email verification links use Supabase's Site URL setting,
# NOT these environment variables. You MUST update Supabase dashboard too!

NEXT_PUBLIC_APP_URL=https://oppspot.vercel.app
NEXT_PUBLIC_APP_NAME=oppSpot
NEXT_PUBLIC_SITE_URL=https://oppspot.vercel.app

# ================================================
# OPTIONAL: ANALYTICS
# ================================================
# PostHog for product analytics (optional)
# Sign up at: https://posthog.com

NEXT_PUBLIC_POSTHOG_KEY=phc_your_project_api_key
NEXT_PUBLIC_POSTHOG_HOST=https://app.posthog.com

# ================================================
# COMPANIES HOUSE API
# ================================================
# UK Companies House API for company registration data
# Register at: https://developer.company-information.service.gov.uk/
# 1. Create an account
# 2. Add an application
# 3. Get your API key
# Note: API is free with rate limits (600 requests/5 minutes)

COMPANIES_HOUSE_API_KEY=your-companies-house-api-key-here
COMPANIES_HOUSE_API_URL=https://api.company-information.service.gov.uk
COMPANIES_HOUSE_CACHE_TTL=86400  # Cache duration in seconds (24 hours)

# ================================================
# OPENCORPORATES API
# ================================================
# OpenCorporates for global company registry data (150+ jurisdictions)
# Sign up at: https://opencorporates.com/users/sign_up
# 1. Create a free account
# 2. Get your API token from Account Settings
# Free tier: 200 requests/month, 50 requests/day
# Paid tier: Contact OpenCorporates for pricing
#
# Note: Free tier requires share-alike attribution (open data license)
# If oppspot is proprietary, upgrade to paid tier to remove license requirement

OPENCORPORATES_API_KEY=your-opencorporates-api-key-here
OPENCORPORATES_RATE_LIMIT_PER_MONTH=200  # Free tier: 200 (adjust if paid tier)
OPENCORPORATES_RATE_LIMIT_PER_DAY=50     # Free tier: 50 (adjust if paid tier)
OPENCORPORATES_CACHE_TTL_DAYS=30         # Cache company data for 30 days

# ================================================
# RESEARCHGPT™ EXTERNAL DATA SOURCES
# ================================================
# Required for ResearchGPT feature to generate AI research reports

# News API for press releases and news signals
# Sign up at: https://newsapi.org/
# Free tier: 100 requests/day
# Paid tier: 1000 requests/day ($449/month)
NEWS_API_KEY=your_newsapi_key_here

# Reed.co.uk Jobs API for hiring signals (UK job market)
# Sign up at: https://www.reed.co.uk/developers
# Free tier available with rate limits
# NOTE: This is OPTIONAL - system will work without it (reduced hiring signals)
REED_API_KEY=your_reed_jobs_api_key_here

# OpenRouter is already configured above (OPENROUTER_API_KEY)
# Used for AI synthesis and recommendations in ResearchGPT

# ================================================
# M&A PREDICTION ALGORITHM
# ================================================
# Configuration for M&A Target Prediction feature (feature 011)

# Cron secret for nightly batch processing (Vercel Cron Job)
# Generate a secure random string: openssl rand -base64 32
CRON_SECRET=your_secure_random_cron_secret_here

# Batch processing configuration
MA_PREDICTION_BATCH_SIZE=100  # Number of companies to process in parallel
MA_PREDICTION_ENABLED=true    # Enable/disable M&A prediction feature

# ================================================
# OPTIONAL: ADDITIONAL SERVICES
# ================================================
# Add any additional service keys here as needed

# Stripe (for payments - not yet implemented)
# STRIPE_SECRET_KEY=sk_test_...
# NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_...

# Sentry (for error tracking - not yet implemented)
# SENTRY_DSN=https://...@sentry.io/...

# ================================================
# DEVELOPMENT ONLY
# ================================================
# These are only used in development environment

# Enable debug mode (verbose logging)
# DEBUG=true

# Disable HTTPS requirement for OAuth (development only)
# NEXTAUTH_URL=http://localhost:3000

# ================================================
# NOTES
# ================================================
# 1. All NEXT_PUBLIC_* variables are exposed to the browser
# 2. Keep sensitive keys (without NEXT_PUBLIC_) server-side only
# 3. Use strong, unique API keys for production
# 4. Rotate keys regularly for security
# 5. Set up key restrictions in respective service dashboards
# 6. Monitor API usage to avoid unexpected charges
